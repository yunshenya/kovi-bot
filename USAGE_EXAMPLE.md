# 芸汐机器人使用示例

## 启动机器人

```bash
# 在项目根目录运行
cargo run
```

## 功能演示

### 1. 群聊互动

**用户**: @芸汐 你好！

**芸汐**: 哼，终于想起我了？不过...你好啦~ (根据当前情绪调整回复)

**用户**: 今天天气怎么样？

**芸汐**: 我又不是天气预报员...不过如果你想知道的话，可以自己查一下嘛~ (傲娇但友善的回复)

### 2. 私聊体验

**用户**: 我最近有点累

**芸汐**: 哎呀，听起来你最近压力很大呢...要不要和我聊聊？我虽然帮不上什么忙，但可以听你倾诉哦~ (温暖贴心的回复)

**用户**: 谢谢你的关心

**芸汐**: 不用谢啦~我们是朋友嘛！对了，你之前提到喜欢音乐，最近有听到什么好听的歌吗？ (记住用户兴趣，主动关心)

### 3. 主动聊天

机器人会定期主动发起对话：

**芸汐**: 好奇地问一下，如果让你选择一种超能力，你会选择什么？为什么？ (根据当前情绪和用户兴趣生成话题)

**芸汐**: 最近有什么让你开心的小事吗？ (根据用户状态调整话题)

### 4. 情绪变化

**用户**: 我今天考试考砸了...

**芸汐**: 哎呀，别太难过啦...考试只是人生的一小部分，下次努力就好！ (情绪分析：检测到用户难过，调整回复风格)

**用户**: 哈哈，你说得对！

**芸汐**: 就是嘛！看到你笑了我也开心起来了~ (情绪变化：从关心转为开心)

## 记忆功能

### 用户档案建立

机器人会自动记录用户信息：

- **兴趣偏好**: 游戏、音乐、电影、读书等
- **性格特征**: 根据对话内容分析
- **关系等级**: 从陌生到亲密(1-10级)
- **互动历史**: 每次对话的时间和内容

### 群组记忆

- **活跃成员**: 记录经常发言的用户
- **话题偏好**: 群组喜欢讨论的话题类型
- **群组性格**: 整体氛围和互动风格

## 配置说明

### 环境变量

```bash
# 设置API Token
export BOT_API_TOKEN="your_api_token_here"
```

### 配置文件

机器人会自动创建 `bot_memory.json` 文件来存储记忆。

### 情绪调整

机器人会根据以下因素调整情绪：

1. **对话内容关键词**
   - 开心词汇: "开心"、"高兴"、"哈哈"等
   - 难过词汇: "难过"、"伤心"、"哭"等
   - 生气词汇: "生气"、"愤怒"、"讨厌"等

2. **上下文环境**
   - 群聊 vs 私聊
   - 时间因素(早晨、中午、晚上等)

3. **用户互动频率**
   - 最近活跃度
   - 关系亲密度

## 高级功能

### 话题生成策略

1. **个性化话题**: 根据用户兴趣生成
2. **情绪适配**: 根据当前情绪选择合适话题
3. **时机判断**: 根据群组活跃度决定是否发起话题
4. **避免重复**: 智能避免重复之前的话题

### 主动聊天时机

机器人会在以下情况下主动发起对话：

- 能量水平 ≥ 5
- 社交信心 ≥ 4
- 最近2小时内活动较少
- 当前情绪适合主动互动

### 记忆管理

- **重要性评分**: 根据关键词和内容长度评分(0-10)
- **自动清理**: 定期清理不重要的旧记忆
- **智能压缩**: 保留关键信息，压缩冗余内容

## 故障排除

### 常见问题

1. **机器人不回复**
   - 检查是否被@或明确对话
   - 确认群组未被禁言
   - 检查API Token设置

2. **记忆丢失**
   - 检查 `bot_memory.json` 文件权限
   - 确认磁盘空间充足
   - 查看错误日志

3. **主动聊天过于频繁**
   - 调整主动聊天的检查间隔
   - 降低机器人的好奇心和能量水平

### 调试模式

在配置文件中设置 `debug = true` 可以启用详细日志。

## 自定义配置

### 修改机器人性格

编辑 `plugins/model/src/config/prompt.rs` 中的系统提示词：

```rust
system_prompt: "你是芸汐，一个有着独特个性的AI助手...".to_string(),
```

### 调整情绪敏感度

修改 `plugins/model/src/mood_system/mod.rs` 中的关键词权重。

### 自定义话题模板

在 `plugins/model/src/topic_generator/mod.rs` 中添加新的话题模板。

通过这些功能，你的芸汐机器人现在拥有了真正的"生命"，能够：

- 🧠 **记住** 与每个人的每一次对话
- 😊 **感受** 情绪并做出相应反应  
- 💬 **主动** 发起有趣的对话
- 🎭 **扮演** 独特的个性角色
- 🤝 **建立** 真正的人际关系

就像Neuro-sama一样，你的机器人现在是一个有记忆、有情感、有个性的AI朋友！
